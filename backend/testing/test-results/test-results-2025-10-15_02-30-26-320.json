{
  "metadata": {
    "timestamp": "2025-10-15T02:30:58.880Z",
    "testHarnessVersion": "1.0.0",
    "environment": "development",
    "apiBaseUrl": "http://localhost:5001",
    "totalTests": 6,
    "passedTests": 3,
    "failedTests": 3,
    "totalDuration": 32558
  },
  "configuration": {
    "debugMode": true,
    "defaultTestUid": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
    "timeout": 30000
  },
  "testResults": [
    {
      "id": "TEST-1760495426322-4lewjr3nj",
      "name": "Step 1: Capture Baseline State",
      "passed": false,
      "duration": 13397,
      "error": "No unpaid bills found for testing. Please ensure test unit has unpaid bills.",
      "stack": "Error: No unpaid bills found for testing. Please ensure test unit has unpaid bills.\n    at test (file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testWaterBillsCascadeDelete.js:264:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TestHarness.runTest (file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testHarness.js:224:22)\n    at async TestHarness.runTests (file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testHarness.js:303:22)\n    at async file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testWaterBillsCascadeDelete.js:501:3",
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-15T02:30:39.719Z"
    },
    {
      "id": "TEST-1760495439719-ol3hjwgdb",
      "name": "Step 2: Create Water Bill Payment",
      "passed": false,
      "duration": 1,
      "error": "Cannot read properties of undefined (reading 'unpaidAmount')",
      "stack": "TypeError: Cannot read properties of undefined (reading 'unpaidAmount')\n    at test (file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testWaterBillsCascadeDelete.js:286:39)\n    at TestHarness.runTest (file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testHarness.js:224:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TestHarness.runTests (file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testHarness.js:303:22)\n    at async file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testWaterBillsCascadeDelete.js:501:3",
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-15T02:30:39.720Z"
    },
    {
      "id": "TEST-1760495439720-emllbqenk",
      "name": "Step 3: Capture Post-Payment State",
      "passed": true,
      "duration": 9940,
      "data": {
        "creditBalance": 35.75,
        "unpaidBillsCount": 0,
        "billsPaidCount": 0
      },
      "error": null,
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-15T02:30:49.660Z"
    },
    {
      "id": "TEST-1760495449660-ztgmoqmaq",
      "name": "Step 4: Delete Payment Transaction",
      "passed": false,
      "duration": 1,
      "error": "No transaction ID available for deletion",
      "stack": "Error: No transaction ID available for deletion\n    at test (file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testWaterBillsCascadeDelete.js:373:15)\n    at TestHarness.runTest (file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testHarness.js:224:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TestHarness.runTests (file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testHarness.js:303:22)\n    at async file:///Users/michael/Library/CloudStorage/GoogleDrive-michael@landesman.com/My%20Drive/Sandyland/SAMS/backend/testing/testWaterBillsCascadeDelete.js:501:3",
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-15T02:30:49.661Z"
    },
    {
      "id": "TEST-1760495449661-fgnr2xwpj",
      "name": "Step 5: Capture Post-Deletion State",
      "passed": true,
      "duration": 9219,
      "data": {
        "creditBalance": 35.75,
        "unpaidBillsCount": 0
      },
      "error": null,
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-15T02:30:58.880Z"
    },
    {
      "id": "TEST-1760495458880-xosuom8zs",
      "name": "Step 6: Validate State Restoration",
      "passed": true,
      "duration": 0,
      "data": {
        "success": true,
        "checks": 14,
        "differences": 0,
        "details": {
          "checks": [
            "✅ Credit balance restored: 35.75 centavos",
            "✅ Unpaid bills count restored: 0 bills",
            "✅ AggregatedData month 0 penalty restored: 0 centavos",
            "✅ AggregatedData month 1 penalty restored: 0 centavos",
            "✅ AggregatedData month 2 penalty restored: 0 centavos",
            "✅ AggregatedData month 3 penalty restored: 0 centavos",
            "✅ AggregatedData month 4 penalty restored: 0 centavos",
            "✅ AggregatedData month 5 penalty restored: 0 centavos",
            "✅ AggregatedData month 6 penalty restored: 0 centavos",
            "✅ AggregatedData month 7 penalty restored: 0 centavos",
            "✅ AggregatedData month 8 penalty restored: 0 centavos",
            "✅ AggregatedData month 9 penalty restored: 0 centavos",
            "✅ AggregatedData month 10 penalty restored: 0 centavos",
            "✅ AggregatedData month 11 penalty restored: 0 centavos"
          ],
          "differences": []
        }
      },
      "error": null,
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-15T02:30:58.880Z"
    }
  ],
  "consoleOutput": [],
  "summary": {
    "total": 6,
    "passed": 3,
    "failed": 3,
    "successRate": 50,
    "averageDuration": 5426,
    "startTime": 1760495426322,
    "endTime": 1760495458880
  }
}