{
  "metadata": {
    "timestamp": "2025-10-20T00:51:30.522Z",
    "testHarnessVersion": "1.0.0",
    "environment": "development",
    "apiBaseUrl": "http://localhost:5001",
    "totalTests": 5,
    "passedTests": 4,
    "failedTests": 1,
    "totalDuration": 0
  },
  "configuration": {
    "debugMode": true,
    "defaultTestUid": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
    "timeout": 30000
  },
  "testResults": [
    {
      "id": "TEST-1760921488265-eygleyldp",
      "name": "Get Live Unpaid Bills",
      "passed": true,
      "duration": 961,
      "data": {
        "unpaidBills": [
          {
            "period": "2026-00",
            "status": "unpaid",
            "currentCharge": 950,
            "penaltyAmount": 0,
            "totalAmount": 950,
            "paidAmount": 0,
            "unpaidAmount": 950
          },
          {
            "period": "2026-01",
            "status": "unpaid",
            "currentCharge": 900,
            "penaltyAmount": 0,
            "totalAmount": 900,
            "paidAmount": 0,
            "unpaidAmount": 900
          }
        ],
        "count": 2
      },
      "error": null,
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-20T00:51:29.226Z",
      "message": "Found 2 unpaid bills"
    },
    {
      "id": "TEST-1760921489226-czt1e3oej",
      "name": "Preview Payment WITH selectedMonth (Month 0 = July)",
      "passed": true,
      "duration": 588,
      "data": {
        "preview": {
          "totalAvailableFunds": 950,
          "billPayments": [
            {
              "unitId": "101",
              "billId": "2026-00",
              "billPeriod": "2026-00",
              "amountPaid": 950,
              "baseChargePaid": 950,
              "penaltyPaid": 0,
              "newStatus": "partial"
            }
          ],
          "allocations": [
            {
              "id": "alloc_001",
              "type": "water_bill",
              "targetId": "bill_2026-00",
              "targetName": "2026-00 - Unit 101",
              "amount": 950,
              "percentage": null,
              "categoryName": "Water Consumption",
              "categoryId": "water-consumption",
              "data": {
                "unitId": "101",
                "billId": "2026-00",
                "billPeriod": "2026-00",
                "billType": "base_charge"
              },
              "metadata": {
                "processingStrategy": "water_bills",
                "cleanupRequired": true,
                "auditRequired": true,
                "createdAt": "2025-10-20T00:51:29.801Z"
              }
            }
          ],
          "allocationSummary": {
            "totalAllocated": 95000,
            "allocationCount": 1,
            "allocationType": "water_bill",
            "hasMultipleTypes": false,
            "integrityCheck": {
              "expectedTotal": 95000,
              "actualTotal": 95000,
              "isValid": true
            }
          },
          "totalBaseCharges": 950,
          "totalPenalties": 0,
          "creditUsed": 0,
          "overpayment": 0,
          "currentCreditBalance": 0,
          "newCreditBalance": 0,
          "totalBillsDue": 950
        },
        "billsProcessed": 1,
        "totalBillsDue": 950
      },
      "error": null,
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-20T00:51:29.814Z",
      "message": "Preview processed 1 bills"
    },
    {
      "id": "TEST-1760921489814-cwq9f1t68",
      "name": "Preview Payment WITHOUT selectedMonth (All Bills)",
      "passed": true,
      "duration": 347,
      "data": {
        "preview": {
          "totalAvailableFunds": 950,
          "billPayments": [
            {
              "unitId": "101",
              "billId": "2026-00",
              "billPeriod": "2026-00",
              "amountPaid": 950,
              "baseChargePaid": 950,
              "penaltyPaid": 0,
              "newStatus": "partial"
            },
            {
              "unitId": "101",
              "billId": "2026-01",
              "billPeriod": "2026-01",
              "amountPaid": 0,
              "baseChargePaid": 0,
              "penaltyPaid": 0,
              "newStatus": "unpaid"
            }
          ],
          "allocations": [
            {
              "id": "alloc_001",
              "type": "water_bill",
              "targetId": "bill_2026-00",
              "targetName": "2026-00 - Unit 101",
              "amount": 950,
              "percentage": null,
              "categoryName": "Water Consumption",
              "categoryId": "water-consumption",
              "data": {
                "unitId": "101",
                "billId": "2026-00",
                "billPeriod": "2026-00",
                "billType": "base_charge"
              },
              "metadata": {
                "processingStrategy": "water_bills",
                "cleanupRequired": true,
                "auditRequired": true,
                "createdAt": "2025-10-20T00:51:30.161Z"
              }
            }
          ],
          "allocationSummary": {
            "totalAllocated": 95000,
            "allocationCount": 2,
            "allocationType": "water_bill",
            "hasMultipleTypes": false,
            "integrityCheck": {
              "expectedTotal": 95000,
              "actualTotal": 95000,
              "isValid": true
            }
          },
          "totalBaseCharges": 950,
          "totalPenalties": 0,
          "creditUsed": 0,
          "overpayment": 0,
          "currentCreditBalance": 0,
          "newCreditBalance": 0,
          "totalBillsDue": 1850
        },
        "billsProcessed": 2,
        "totalBillsDue": 1850
      },
      "error": null,
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-20T00:51:30.161Z",
      "message": "Preview processed 2 bills"
    },
    {
      "id": "TEST-1760921490162-nh5py9c0r",
      "name": "Compare Preview WITH vs WITHOUT selectedMonth",
      "passed": false,
      "duration": 0,
      "data": {
        "billsMatch": false,
        "chargesMatch": true,
        "penaltiesMatch": true,
        "totalsMatch": false,
        "with_data": {
          "totalAvailableFunds": 950,
          "billPayments": [
            {
              "unitId": "101",
              "billId": "2026-00",
              "billPeriod": "2026-00",
              "amountPaid": 950,
              "baseChargePaid": 950,
              "penaltyPaid": 0,
              "newStatus": "partial"
            }
          ],
          "allocations": [
            {
              "id": "alloc_001",
              "type": "water_bill",
              "targetId": "bill_2026-00",
              "targetName": "2026-00 - Unit 101",
              "amount": 950,
              "percentage": null,
              "categoryName": "Water Consumption",
              "categoryId": "water-consumption",
              "data": {
                "unitId": "101",
                "billId": "2026-00",
                "billPeriod": "2026-00",
                "billType": "base_charge"
              },
              "metadata": {
                "processingStrategy": "water_bills",
                "cleanupRequired": true,
                "auditRequired": true,
                "createdAt": "2025-10-20T00:51:29.801Z"
              }
            }
          ],
          "allocationSummary": {
            "totalAllocated": 95000,
            "allocationCount": 1,
            "allocationType": "water_bill",
            "hasMultipleTypes": false,
            "integrityCheck": {
              "expectedTotal": 95000,
              "actualTotal": 95000,
              "isValid": true
            }
          },
          "totalBaseCharges": 950,
          "totalPenalties": 0,
          "creditUsed": 0,
          "overpayment": 0,
          "currentCreditBalance": 0,
          "newCreditBalance": 0,
          "totalBillsDue": 950
        },
        "without_data": {
          "totalAvailableFunds": 950,
          "billPayments": [
            {
              "unitId": "101",
              "billId": "2026-00",
              "billPeriod": "2026-00",
              "amountPaid": 950,
              "baseChargePaid": 950,
              "penaltyPaid": 0,
              "newStatus": "partial"
            },
            {
              "unitId": "101",
              "billId": "2026-01",
              "billPeriod": "2026-01",
              "amountPaid": 0,
              "baseChargePaid": 0,
              "penaltyPaid": 0,
              "newStatus": "unpaid"
            }
          ],
          "allocations": [
            {
              "id": "alloc_001",
              "type": "water_bill",
              "targetId": "bill_2026-00",
              "targetName": "2026-00 - Unit 101",
              "amount": 950,
              "percentage": null,
              "categoryName": "Water Consumption",
              "categoryId": "water-consumption",
              "data": {
                "unitId": "101",
                "billId": "2026-00",
                "billPeriod": "2026-00",
                "billType": "base_charge"
              },
              "metadata": {
                "processingStrategy": "water_bills",
                "cleanupRequired": true,
                "auditRequired": true,
                "createdAt": "2025-10-20T00:51:30.161Z"
              }
            }
          ],
          "allocationSummary": {
            "totalAllocated": 95000,
            "allocationCount": 2,
            "allocationType": "water_bill",
            "hasMultipleTypes": false,
            "integrityCheck": {
              "expectedTotal": 95000,
              "actualTotal": 95000,
              "isValid": true
            }
          },
          "totalBaseCharges": 950,
          "totalPenalties": 0,
          "creditUsed": 0,
          "overpayment": 0,
          "currentCreditBalance": 0,
          "newCreditBalance": 0,
          "totalBillsDue": 1850
        }
      },
      "error": null,
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-20T00:51:30.162Z",
      "message": "Results differ - bug confirmed",
      "reason": "selectedMonth parameter causes different calculations"
    },
    {
      "id": "TEST-1760921490162-9r9u0uxol",
      "name": "Check AggregatedData Status",
      "passed": true,
      "duration": 360,
      "data": {
        "exists": true,
        "fiscalYear": true,
        "monthsCount": 12,
        "unitFound": true,
        "unitStatus": "unpaid"
      },
      "error": null,
      "userId": "fjXv8gX1CYWBvOZ1CS27j96oRCT2",
      "timestamp": "2025-10-20T00:51:30.522Z",
      "message": "aggregatedData exists, unit found"
    }
  ],
  "consoleOutput": [],
  "summary": {
    "total": 5,
    "passed": 4,
    "failed": 1,
    "successRate": 80,
    "averageDuration": 451,
    "startTime": null,
    "endTime": 1760921490522
  }
}